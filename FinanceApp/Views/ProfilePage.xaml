<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FinanceApp.Views.ProfilePage"
             Shell.NavBarIsVisible="False">
    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#B3DDF1" Offset="0.0" />
            <GradientStop Color="#76C8F6" Offset="0.5" />
            <GradientStop Color="#B3DDF1" Offset="1.0" />
        </LinearGradientBrush>
    </ContentPage.Background>

    <VerticalStackLayout Padding="16" Spacing="12">
        <Label Text="Профиль" FontSize="22" FontAttributes="Bold" />

        <Grid ColumnDefinitions="*,Auto" ColumnSpacing="8">
            <Entry x:Name="NewProfileEntry" Placeholder="Новый профиль (например, shop1)" />
            <Button Grid.Column="1" Text="Создать и использовать" Clicked="OnCreateAndUse"/>
        </Grid>

        <Label Text="Доступные профили:" FontAttributes="Bold" />
        <CollectionView x:Name="ProfilesCv" HeightRequest="220" SelectionMode="Single"
                    SelectionChanged="OnSelectionChanged">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid ColumnDefinitions="*,Auto,Auto" Padding="4">
                        <Label Text="{Binding .}" VerticalTextAlignment="Center" />
                        <Button Grid.Column="1" Text="Использовать" Clicked="OnUseProfile" CommandParameter="{Binding .}" />
                        <Button Grid.Column="2" Text="Удалить" Clicked="OnDeleteProfile" CommandParameter="{Binding .}" />
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <Label x:Name="CurrentLabel" Text="" FontAttributes="Italic" />
    </VerticalStackLayout>
</ContentPage>
