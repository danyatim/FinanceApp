<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" 
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               xmlns:viewModels="clr-namespace:FinanceApp.ViewModels"
               xmlns:models="clr-namespace:FinanceApp.Models"
               x:Class="FinanceApp.Popups.AddSupplyPopup"  
               x:DataType="viewModels:AddSupplyPopupViewModel"
               CanBeDismissedByTappingOutsideOfPopup="False"
               Color="#88D4F2"
               Size="900, 700">
    
    <Grid ColumnDefinitions="*,*" Padding="16" ColumnSpacing="12">

        <CollectionView Grid.Column="0" ItemsSource="{Binding Products}" >
            <CollectionView.Header>
                <Label Text="Товары" Style="{StaticResource HeaderAddSupplyPopup}"/>
            </CollectionView.Header>
            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Vertical" Span="2" VerticalItemSpacing="8" HorizontalItemSpacing="8"/>
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="models:Product">
                    <Border Style="{StaticResource BorderAddSupplyPopup}">
                        <FlexLayout Direction="Column" JustifyContent="SpaceAround">
                            <Label Text="{Binding Name}" Style="{StaticResource BorderLabelAddSupplyPopup}"/>
                            <Label Text="{Binding Size}" Style="{StaticResource BorderLabelAddSupplyPopup}"/>
                            <Label Text="{Binding Quantity}" Style="{StaticResource BorderLabelAddSupplyPopup}"/>
                            <Label Text="{Binding Color}" Style="{StaticResource BorderLabelAddSupplyPopup}"/>
                        </FlexLayout>
                    </Border>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <FlexLayout Direction="Column" JustifyContent="SpaceBetween" Grid.Column="1" VerticalOptions="Start">

            <VerticalStackLayout Spacing="5">
                <Label Text="Поставка" Style="{StaticResource HeaderAddSupplyPopup}"/>
                <Label Text="Цена доставки" Style="{StaticResource EntryLabel}"/>
                <Entry Text="{Binding SupplyDeliveryPrice}" Placeholder="Цена доставки" />
                <Label Text="Количество товаров" Style="{StaticResource EntryLabel}"/>
                <Entry Text="{Binding CountProduct}" Placeholder="Количество товаров" />
            </VerticalStackLayout>

            <VerticalStackLayout Spacing="5">
                <Label Text="Информация о товаре" Style="{StaticResource HeaderAddSupplyPopup}" />
                <Label Text="Артикул" Style="{StaticResource EntryLabel}"/>
                <Entry Text="{Binding ProductArticle}" Placeholder="Артикул" />
                <Label Text="Наименование" Style="{StaticResource EntryLabel}"/>
                <Entry Text="{Binding ProductName}" Placeholder="Наименование" />
                <Label Text="Цвет" Style="{StaticResource EntryLabel}"/>
                <Entry Text="{Binding ProductColor}" Placeholder="Цвет" />
                <Label Text="Размер" Style="{StaticResource EntryLabel}"/>
                <Entry Text="{Binding ProductSize}" Placeholder="Размер" />
                <Label Text="Остаток" Style="{StaticResource EntryLabel}"/>
                <Entry Text="{Binding ProductQuantity}" Placeholder="Остаток" />
                <Label Text="Цена продажи" Style="{StaticResource EntryLabel}"/>
                <Entry Text="{Binding ProductSellPrice}" Placeholder="Цена продажи" />
                <Label Text="Цена закупки" Style="{StaticResource EntryLabel}"/>
                <Entry Text="{Binding ProductBuyPrice}" Placeholder="Цена закупки" />
                <Label Text="Комиссия, %" Style="{StaticResource EntryLabel}"/>
                <Entry Text="{Binding ProductFeePercent}" Placeholder="Комиссия, %" />
            </VerticalStackLayout>

            <HorizontalStackLayout Grid.Column="1" HorizontalOptions="End" Spacing="8">
                <Button Text="Отмена" Command="{Binding CancelCommand}" Style="{StaticResource RedButtonStyle}" ToolTipProperties.Text="Отмена и закрытие" />
                <Button Text="Сохранить" IsEnabled="{Binding IsSave}" Command="{Binding SaveCommand}" Style="{StaticResource GreenButtonStyle}" ToolTipProperties.Text="Сохранить и закрыть" />
                <Button Text="Добавить" Command="{Binding AddProductCommand}" Style="{StaticResource GreenButtonStyle}" ToolTipProperties.Text="Добавить в список" />
            </HorizontalStackLayout>
        </FlexLayout>
    </Grid>
    
</toolkit:Popup>
